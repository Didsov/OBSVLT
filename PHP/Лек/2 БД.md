Работа с БД в php выглядит так:
1. Установить подключение к БД, передав пароль и логин, доп параметры
2. Проверить что подключение успешно
3. Сформировать SQL запрос
4. Проверить успешность запроса
5. Получить результат из БД в виде массива
6. Использовать массив


### 1. Включение
Для начала нужно настроить php, для этого проверяем что в php.ini по адресу C:\xampp\php раскомментирован    ;extension=pdo_mysql


### 2. Подключение
Для подключения используется конструктор new PDO(), в него передаются параметры и настройки подключения:
	new PDO(
		"mysql:host=адрес_Сервера;port=номер_порта;dbname=имя_базы",
		"имя_пользователя",
		"пароль"
		)
При успешном подключении конструктор возвращает объект, при неуспешном исключение, поэтому это стоит вызвать через конструкцию try..catch

```
<?php
try {
    // подключаемся к серверу
    $conn = new PDO("mysql:host=localhost", "root", "mypassword");
    echo "Database connection established";
}
catch (PDOException $e) {
    echo "Connection failed: " . $e->getMessage();
}
?>

```

### 3. Запрос
Запросы могут возвращать или не возвращать результат.
К запросам, которые не возвращают результат относятся :  INSERT DELETE UPDATE
Они вызываются методом exec у объекта PDA:
	$conn->exec("SQL команда");
```
$sql = "INSERT INTO Users (name, age) VALUES ('$username', $userage)";
$affectedRowsNumber = $conn->exec($sql);

```

Для SQL запросов  метод exec возвращает количество измененных строк. 



К запросам, которые возвращают результат относится SHOW и SELECT
Они вызываются методом query(), который возращает объект PDOStatement и из которого можно уже получить массив данный с помощью метода  fetch() 
```
$STH = $DBH->query('SELECT name, addr, city from folks');  
  
# устанавливаем режим выборки
$STH->setFetchMode(PDO::FETCH_ASSOC);  
  
while($row = $STH->fetch()) {  
    echo $row['name'] . "\n";  
    echo $row['addr'] . "\n";  
    echo $row['city'] . "\n";  
}

```
При этом строку из fetch можно получить в нескольких видах:
-  setFetchMode(PDO::FETCH_ASSOC);  - это имена колонок в качестве  индекса 
- setFetchMode(PDO::FETCH_OBJ); - это объект со свойствами, соответствующими именам столбцов

Если нужно вернуть массив со всеми строками из запроса за один раз, то нужно использовать fetchAll()



